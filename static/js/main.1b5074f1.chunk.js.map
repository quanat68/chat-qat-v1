{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","_ref","children","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","createElement","Provider","Chats","didMountRef","useRef","useContext","_handleLogout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","signOut","stop","apply","arguments","_getFile","_callee2","url","response","data","_context2","fetch","sent","blob","abrupt","File","type","current","axios","get","headers","process","email","uid","then","catch","e","formdata","FormData","append","_x","getFile","photoURL","avatar","name","post","console","log","className","onClick","BiLogOutCircle","ChatEngine","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","FaGoogle","FacebookAuthProvider","FaFacebookF","App","style","fontFamily","Router","Switch","Route","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1b5074f1.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\nimport \"firebase/auth\";\r\n\r\nexport const auth = firebase.initializeApp ({\r\n  apiKey: \"AIzaSyADXHAsx78Vlk7AFMLkeUu-JD4SsO97RkY\",\r\n  authDomain: \"chat-qat-v1.firebaseapp.com\",\r\n  projectId: \"chat-qat-v1\",\r\n  storageBucket: \"chat-qat-v1.appspot.com\",\r\n  messagingSenderId: \"1069830741866\",\r\n  appId: \"1:1069830741866:web:17e065f61efb86a7054f13\"\r\n}).auth();","import React, { useContext, useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\n\r\nconst AuthContext = React.createContext(); \r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [loading, setLoading] = useState (true);\r\n    const [user, setUser] = useState(null);\r\n    const history = useHistory();\r\n\r\n    useEffect ( () => {\r\n        auth.onAuthStateChanged((user) => {\r\n            setUser(user);\r\n            setLoading(false);\r\n\r\n            if(user) history.push('/chats');\r\n        })\r\n    }, [user, history]);\r\n\r\n    const value = {user};\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    )\r\n}","import React, { useRef, useState, useEffect} from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { ChatEngine } from 'react-chat-engine'\r\nimport { auth } from '../firebase'\r\nimport {BiLogOutCircle} from 'react-icons/bi'\r\nimport '../App.css'\r\n\r\nimport axios from 'axios'\r\n\r\nimport { useAuth } from '../contexts/AuthContext'\r\n\r\nconst Chats = () => {\r\n    // const didMountRef = useRef(false)\r\n    // const history = useHistory();\r\n    // const {user} = useAuth();\r\n    // const[loading, setLoading] = useState(true)\r\n\r\n    // const handleLogout = async () => {\r\n    //     await auth.signOut();\r\n\r\n    //     history.push('/');\r\n    // }\r\n\r\n    // const getFile = async (url) => {\r\n    //     const response = await fetch(url);\r\n    //     const data = await response.blob();\r\n\r\n    //     return new File([data], \"userPhoto.jpg\", {type: 'img/jpeg'})\r\n    // }\r\n\r\n    // useEffect(() => {\r\n    //     if(!didMountRef.current) {\r\n    //         didMountRef.current= true\r\n\r\n    //         if(!user || user === null) {\r\n    //             history.push(\"/\")\r\n    //             return;\r\n    //         }\r\n    //     }\r\n\r\n    //     axios.get('https://api.chatengine.io/user/me/', \r\n    //     { headers: {\r\n    //             \"project-id\": process.env.REACT_APP_CHAT_ENGINE_ID,\r\n    //             \"user-name\": user.email,\r\n    //             \"user-secret\": user.uid,\r\n    //         }\r\n    //     })\r\n        \r\n    //     .then(() => setLoading(false))\r\n\r\n    //     .catch(e => {\r\n    //         let formData = new FormData()\r\n    //         formData.append('email', user.email)\r\n    //         formData.append('username', user.email)\r\n    //         formData.append('secret', user.uid)\r\n\r\n    //         getFile(user.photoURL)\r\n    //             .then((avatar) => {\r\n    //                 formData.append('avatar', avatar, avatar.name)\r\n\r\n    //                 axios.post('https://api.chatengine.io/users/',\r\n    //                     formData,\r\n    //                     { headers: {\"private-key\": process.env.REACT_APP_CHAT_ENGINE_KEY} }\r\n    //                 )\r\n\r\n    //                 .then(() => setLoading(false))\r\n    //                 .catch(e => console.log('e', e.response))\r\n    //             })\r\n    //     })\r\n    // }, [user, history]);\r\n\r\n    // if(!user || loading) return 'Loading...'\r\n    \r\n    const didMountRef = useRef(false)\r\n    const [ loading, setLoading ] = useState(true)\r\n    const { user } = useAuth()\r\n    const history = useHistory()\r\n\r\n    async function handleLogout() {\r\n        await auth.signOut()\r\n        history.push(\"/\")\r\n    }\r\n\r\n    async function getFile(url) {\r\n        let response = await fetch(url);\r\n        let data = await response.blob();\r\n        return new File([data], \"test.jpg\", { type: 'image/jpeg' });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!didMountRef.current) {\r\n          didMountRef.current = true\r\n    \r\n          if (!user || user === null) {\r\n            history.push(\"/\")\r\n            return\r\n          }\r\n          \r\n          // Get-or-Create should be in a Firebase Function\r\n          axios.get(\r\n            'https://api.chatengine.io/users/me/',\r\n            { headers: { \r\n              \"project-id\": process.env.REACT_APP_CHAT_ENGINE_ID,\r\n              \"user-name\": user.email,\r\n              \"user-secret\": user.uid\r\n            }}\r\n          )\r\n    \r\n          .then(() => setLoading(false))\r\n    \r\n          .catch(e => {\r\n            let formdata = new FormData()\r\n            formdata.append('email', user.email)\r\n            formdata.append('username', user.email)\r\n            formdata.append('secret', user.uid)\r\n    \r\n            getFile(user.photoURL)\r\n            .then(avatar => {\r\n              formdata.append('avatar', avatar, avatar.name)\r\n    \r\n              axios.post(\r\n                'https://api.chatengine.io/users/',\r\n                formdata,\r\n                { headers: { \"private-key\": process.env.REACT_APP_CHAT_ENGINE_KEY }}\r\n              )\r\n              .then(() => setLoading(false))\r\n              .catch(e => console.log('e', e.response))\r\n            })\r\n          })\r\n        }\r\n    }, [user, history])\r\n\r\n\r\n    if (!user || loading) return 'Loading ...'\r\n\r\n    return (\r\n        <div className='chats-page'>\r\n            <div className='nav-bar'>\r\n                <div className='logo-tab'>\r\n                    Chat QAT\r\n                </div>\r\n\r\n                <div onClick={handleLogout} className='logout-tab'>\r\n                    <BiLogOutCircle className='icons'/> LogOut\r\n                </div>\r\n\r\n                \r\n            </div>\r\n\r\n            <ChatEngine \r\n                height = \"calc(100vh - 66px)\"\r\n                projectID = {process.env.REACT_APP_CHAT_ENGINE_ID}\r\n                userName = {user.email}\r\n                userSecret = {user.uid}\r\n            />\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chats","import React from 'react'\r\n// import { GoogleOutlined, FacebookOutlined } from '@ant-design/icons'\r\nimport {FaFacebookF, FaGoogle} from 'react-icons/fa'\r\n\r\nimport \"firebase/app\";\r\n\r\nimport { auth } from '../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nconst Login = () => {\r\n  return (\r\n    <div id='login-page'>\r\n        <div id='login-card'>\r\n            <h2>\r\n                Welcome to ChatQAT!!\r\n            </h2>\r\n\r\n            <div className='login-button google'\r\n                onClick={() => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\r\n            >\r\n                <FaGoogle /> Sign In with Google\r\n            </div>\r\n\r\n            <br/> <br/>\r\n\r\n            <div className='login-button facebook'\r\n                onClick={() => auth.signInWithRedirect(new firebase.auth.FacebookAuthProvider())}\r\n            >\r\n                <FaFacebookF /> Sign In with Facebook\r\n            </div>\r\n\r\n\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login","import React from \"react\"\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport { AuthProvider } from \"../contexts/AuthContext\"\n\nimport Chats from \"./Chats\"\nimport Login from \"./Login\"\n\nimport '../index.css'\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Avenir' }}>\n      <Router>\n        <AuthProvider>\n          <Switch>\n            <Route path=\"/chats\" component={Chats} />\n            <Route path=\"/\" component={Login} />\n          </Switch>\n        </AuthProvider>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}